# Hunter - èµ„äº§æœé›†å¼•æ“

Hunter æ˜¯ä¸€ä¸ªæ¨¡å—åŒ–çš„èµ„äº§æœé›†å¼•æ“ï¼Œé‡‡ç”¨æµæ°´çº¿æ¶æ„è®¾è®¡ï¼Œæ”¯æŒæ’ä»¶åŒ–æ‰©å±•ã€‚

## ğŸ—ï¸ æ¶æ„è®¾è®¡

- **æ’ä»¶åŒ–è®¾è®¡**: æ¯ä¸ªæ‰«æå·¥å…·éƒ½æ˜¯ç‹¬ç«‹çš„æ’ä»¶ï¼Œæ˜“äºæ‰©å±•
- **æµæ°´çº¿æ¨¡å¼**: æ”¯æŒå°†ä¸€ä¸ªå·¥å…·çš„è¾“å‡ºä½œä¸ºä¸‹ä¸€ä¸ªå·¥å…·çš„è¾“å…¥
- **æ¨¡å—åŒ–æ‰§è¡Œ**: æ”¯æŒå•ç‹¬è¿è¡Œå„æ¨¡å—æˆ–ç»„åˆè¿è¡Œ
- **æ•°æ®åº“å­˜å‚¨**: ä½¿ç”¨ PostgreSQL + GORM è¿›è¡Œæ•°æ®æŒä¹…åŒ–

## ğŸ“ é¡¹ç›®ç»“æ„

```
hunter/
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ engine/          # æµæ°´çº¿æ ¸å¿ƒé€»è¾‘
â”‚   â”‚   â””â”€â”€ scanner.go   # Scanner æ¥å£å’Œ Pipeline å®ç°
â”‚   â”œâ”€â”€ plugins/         # æ‰«æå·¥å…·æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ subfinder.go # Subfinder åŸŸåæœé›†æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ samoscout.go # Samoscout åŸŸåæœé›†æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ subdog.go    # Subdog åŸŸåæœé›†æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ shosubgo.go  # Shosubgo åŸŸåæœé›†æ’ä»¶ï¼ˆShodanï¼‰
â”‚   â”‚   â”œâ”€â”€ httpx.go     # Httpx å­˜æ´»æ£€æµ‹æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ naabu.go     # Naabu ç«¯å£æ‰«ææ’ä»¶
â”‚   â”‚   â”œâ”€â”€ nmap.go      # Nmap æœåŠ¡è¯†åˆ«æ’ä»¶
â”‚   â”‚   â”œâ”€â”€ gowitness.go # Gowitness æˆªå›¾æ’ä»¶
â”‚   â”‚   â””â”€â”€ utils.go     # è¾…åŠ©å‡½æ•°
â”‚   â””â”€â”€ db/              # æ•°æ®åº“ç›¸å…³
â”‚       â”œâ”€â”€ models.go    # æ•°æ®æ¨¡å‹
â”‚       â””â”€â”€ database.go  # æ•°æ®åº“æ“ä½œ
â”œâ”€â”€ main.go              # ä¸»ç¨‹åºå…¥å£
â”œâ”€â”€ go.mod               # Go æ¨¡å—æ–‡ä»¶
â”œâ”€â”€ docker-compose.yml   # PostgreSQL å®¹å™¨é…ç½®
â””â”€â”€ README.md            # é¡¹ç›®è¯´æ˜
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

ç¡®ä¿å·²å®‰è£…ä»¥ä¸‹å·¥å…·ï¼š
- Go 1.21+
- Docker & Docker Compose

å®‰è£…æ‰«æå·¥å…·ï¼š
```bash
# å­åŸŸåæ”¶é›†å·¥å…·
go install -v github.com/projectdiscovery/subfinder/v2/cmd/subfinder@latest
go install -v github.com/samogod/samoscout@latest
go install -v github.com/rix4uni/SubDog@latest
go install -v github.com/incogbyte/shosubgo@latest

# å­˜æ´»æ£€æµ‹
go install -v github.com/projectdiscovery/httpx/cmd/httpx@latest

# ç«¯å£æ‰«æ
go install -v github.com/projectdiscovery/naabu/v2/cmd/naabu@latest
# nmap éœ€è¦ç³»ç»Ÿå®‰è£…

# æˆªå›¾å·¥å…·
go install github.com/sensepost/gowitness@latest
```

### 2. å¯åŠ¨æ•°æ®åº“

```bash
docker-compose up -d
```

### 3. è¿è¡Œæ‰«æ

```bash
# å®Œæ•´æ‰«æï¼ˆå­åŸŸå + ç«¯å£ + æˆªå›¾ï¼‰
hunter -d example.com

# æ‰¹é‡æ‰«æ
hunter -dL domains.txt

# æµ‹è¯•æ¨¡å¼ï¼ˆä¸å†™å…¥æ•°æ®åº“ï¼‰
hunter -d example.com --dry-run
```

## ğŸ“‹ å‘½ä»¤è¡Œå‚æ•°

### åŸºç¡€å‚æ•°

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-d` | å•ä¸ªç›®æ ‡åŸŸå | `-d example.com` |
| `-dL` | åŸŸååˆ—è¡¨æ–‡ä»¶ | `-dL domains.txt` |
| `-i` | è¾“å…¥æ–‡ä»¶ï¼ˆç”¨äº ports/witness æ¨¡å—ï¼‰ | `-i subdomains.txt` |
| `-m` | é€‰æ‹©æ¨¡å—ï¼ˆé€—å·åˆ†éš”ï¼‰ | `-m subs,ports` |
| `--dry-run` | æµ‹è¯•æ¨¡å¼ï¼Œä¸å†™å…¥æ•°æ®åº“ | `--dry-run` |

### æ¨¡å—é€‰æ‹© (-m)

| æ¨¡å— | è¯´æ˜ | è¾“å…¥ç±»å‹ |
|------|------|----------|
| `subs` | å­åŸŸåæ”¶é›† | åŸŸå |
| `ports` | ç«¯å£æ‰«æï¼ˆå« httpx æµ‹æ´»ï¼‰ | å­åŸŸå |
| `witness` | Web æˆªå›¾ | URL |

### æˆªå›¾ç›¸å…³

| å‚æ•° | è¯´æ˜ | ç¤ºä¾‹ |
|------|------|------|
| `-screenshot-dir` | æˆªå›¾å­˜å‚¨ç›®å½• | `-screenshot-dir ./shots` |
| `-report` | å¯åŠ¨æˆªå›¾æŸ¥çœ‹æœåŠ¡ | `-report example.com` |
| `-report-host` | æˆªå›¾æœåŠ¡ç›‘å¬åœ°å€ | `-report-host 0.0.0.0` |
| `-report-port` | æˆªå›¾æœåŠ¡ç›‘å¬ç«¯å£ | `-report-port 7070` |
| `-list-screenshots` | åˆ—å‡ºæ‰€æœ‰æœ‰æˆªå›¾çš„åŸŸå | `-list-screenshots` |

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### å®Œæ•´æ‰«æ

```bash
# å•åŸŸåå®Œæ•´æ‰«æ
hunter -d example.com

# æ‰¹é‡åŸŸåå®Œæ•´æ‰«æ
hunter -dL domains.txt

# æµ‹è¯•æ¨¡å¼ï¼ˆä¸å†™å…¥æ•°æ®åº“ï¼‰
hunter -d example.com --dry-run
```

### æ¨¡å—å•ç‹¬ä½¿ç”¨

```bash
# ä»…å­åŸŸåæ”¶é›†
hunter -m subs -d example.com

# ä»…ç«¯å£æ‰«æï¼ˆè¾“å…¥: å­åŸŸååˆ—è¡¨ï¼‰
hunter -m ports -i subdomains.txt

# ä»…æˆªå›¾ï¼ˆè¾“å…¥: URL åˆ—è¡¨ï¼‰
hunter -m witness -i urls.txt

# ç®¡é“è¾“å…¥
cat subdomains.txt | hunter -m ports
echo "https://example.com" | hunter -m witness
```

### æ¨¡å—ç»„åˆ

```bash
# å­åŸŸå + ç«¯å£æ‰«æ
hunter -m subs,ports -d example.com

# å­åŸŸå + æˆªå›¾
hunter -m subs,witness -d example.com

# ç«¯å£æ‰«æ + æˆªå›¾
hunter -m ports,witness -i subdomains.txt
```

### æˆªå›¾ç®¡ç†

```bash
# åˆ—å‡ºæ‰€æœ‰æœ‰æˆªå›¾çš„åŸŸå
hunter -list-screenshots

# å¯åŠ¨æˆªå›¾æŸ¥çœ‹æœåŠ¡
hunter -report example.com

# æŒ‡å®šç«¯å£
hunter -report example.com -report-port 8080
```

## ğŸ”§ æ‰«ææµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        subs æ¨¡å—                             â”‚
â”‚  Subfinder + Samoscout + Subdog + Shosubgoï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                         å­åŸŸååˆ—è¡¨
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       ports æ¨¡å—                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚   Httpx     â”‚    â”‚  Naabu â†’ Nmapï¼ˆç«¯å£æ‰«æé“¾ï¼‰      â”‚     â”‚
â”‚  â”‚  ï¼ˆæµ‹æ´»ï¼‰    â”‚    â”‚                                 â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚        â†“ å¹¶è¡Œæ‰§è¡Œ                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†“
                          å­˜æ´» URL
                              â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      witness æ¨¡å—                            â”‚
â”‚                 Gowitnessï¼ˆæŒ‰åŸŸååˆ†ç±»æˆªå›¾ï¼‰                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¸ æˆªå›¾å­˜å‚¨ç»“æ„

æˆªå›¾æŒ‰æ ¹åŸŸååˆ†ç±»å­˜å‚¨ï¼š

```
screenshots/
â”œâ”€â”€ google.com/
â”‚   â”œâ”€â”€ gowitness.sqlite3
â”‚   â””â”€â”€ screenshots/
â””â”€â”€ tesla.com/
    â”œâ”€â”€ gowitness.sqlite3
    â””â”€â”€ screenshots/
```

## ğŸ—„ï¸ æ•°æ®åº“æ“ä½œ

### è¿æ¥æ•°æ®åº“

```bash
docker exec -it hunter-postgres psql -U hunter -d hunter
```

### å¸¸ç”¨æŸ¥è¯¢

```sql
-- æŸ¥çœ‹æ‰€æœ‰èµ„äº§
SELECT domain, url, status_code, title FROM assets;

-- æŸ¥çœ‹æ‰€æœ‰ç«¯å£
SELECT domain, ip, port, service, version FROM ports;

-- æŒ‰åŸŸåç»Ÿè®¡
SELECT 
    SUBSTRING(domain FROM '([^.]+\.[^.]+)$') as root_domain,
    COUNT(*) as count 
FROM assets 
GROUP BY root_domain;
```

### æ¸…ç†æ•°æ®

```bash
docker exec -it hunter-postgres psql -U hunter -d hunter -c "TRUNCATE TABLE assets, ports RESTART IDENTITY CASCADE;"
```

## ğŸ”Œ æ‰©å±•æ’ä»¶

è¦æ·»åŠ æ–°çš„æ‰«æå·¥å…·ï¼Œåªéœ€ï¼š

1. åœ¨ `internal/plugins/` ç›®å½•åˆ›å»ºæ–°æ’ä»¶æ–‡ä»¶
2. å®ç° `Scanner` æ¥å£
3. åœ¨ `main.go` ä¸­æ·»åŠ åˆ°æµæ°´çº¿

```go
type Scanner interface {
    Name() string
    Execute(input []string) ([]Result, error)
}
```

## ğŸ› ï¸ æŠ€æœ¯ç‰¹æ€§

- **æ¨¡å—åŒ–æ‰§è¡Œ**: å„æ¨¡å—å¯ç‹¬ç«‹è¿è¡Œæˆ–ç»„åˆä½¿ç”¨
- **æµ‹è¯•æ¨¡å¼**: `--dry-run` ä¸å†™å…¥æ•°æ®åº“ï¼Œæ–¹ä¾¿è°ƒè¯•
- **ç®¡é“æ”¯æŒ**: æ”¯æŒ stdin è¾“å…¥ï¼Œä¾¿äºä¸å…¶ä»–å·¥å…·é›†æˆ
- **é”™è¯¯å¤„ç†**: ä¼˜é›…å¤„ç†å·¥å…·ç¼ºå¤±å’Œæ‰§è¡Œé”™è¯¯
- **å¹¶å‘æ‰§è¡Œ**: å­åŸŸåæ”¶é›†å·¥å…·å¹¶è¡Œæ‰§è¡Œ
- **æ•°æ®å»é‡**: è‡ªåŠ¨å»é‡å’Œæ›´æ–°é‡å¤è®°å½•
